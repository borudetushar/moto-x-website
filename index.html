<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOTO-X | Journey to the Road</title>

    <script>
        window.dataLayer = window.dataLayer || [];
    </script>

    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PDC3P7S');</script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #333; }
        nav { background: #111; padding: 15px; color: white; display: flex; justify-content: space-between; align-items: center; }
        nav h1 { margin: 0; color: #ff4d4d; letter-spacing: 2px; }
        nav a { color: white; text-decoration: none; margin: 0 15px; font-weight: 500; cursor: pointer; }
        
        .hero { background: #333; color: white; padding: 100px 20px; text-align: center; }
        .hero h2 { font-size: 3em; margin: 0; }
        .btn { background: #ff4d4d; color: white; padding: 10px 20px; border: none; cursor: pointer; font-size: 1.1em; margin-top: 20px; text-decoration: none; display: inline-block; }
        
        .container { padding: 40px 20px; max-width: 1200px; margin: auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center; transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; height: 200px; object-fit: cover; border-radius: 5px; background: #eee; }
        .price { color: #ff4d4d; font-weight: bold; font-size: 1.2em; }

        /* Comparison Section Styles */
        #compare-section { display: none; background: white; padding: 40px; margin-top: 40px; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }

        /* Modal Styles */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 30px; width: 400px; border-radius: 8px; position: relative; }
        .close { float: right; cursor: pointer; font-size: 1.5em; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        
        #otp-section { display: none; background: #e8f0fe; padding: 10px; border-radius: 4px; margin-top: 10px; }
    </style>
</head>
<body>

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PDC3P7S"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <nav>
        <h1>MOTO-X</h1>
        <div>
            <a href="#" onclick="showHome()">Home</a>
            <a href="#vehicles">Vehicles</a>
            <a href="#compare" onclick="toggleCompare()">Compare Specs</a> <button class="btn" style="margin-left: 15px; font-size: 0.9em;" onclick="openModal()">Book Test Drive</button>
        </div>
    </nav>

    <div id="home-view">
        <div class="hero">
            <h2>Experience the Thrill</h2>
            <p>Discover our new range of performance bikes and city scooters.</p>
            <a href="#vehicles" class="btn">View All Models</a>
        </div>

        <div class="container" id="vehicles">
            <h3>Featured This Month</h3>
            <div class="grid">
                <div class="card vehicle-card">
                    <img src="https://via.placeholder.com/400x300?text=Thunder+X1" alt="Thunder X1">
                    <h3>Thunder X1</h3>
                    <p>500cc | 6-Speed | ABS</p>
                    <p class="price">$2,500</p>
                    <button class="btn" onclick="loadVehicleDetail('Thunder X1', 'MOTO-500', 2500, 'Motorcycle')">View Details</button>
                </div>
                <div class="card vehicle-card">
                    <img src="https://via.placeholder.com/400x300?text=Scoot+S-Pro" alt="Scoot S-Pro">
                    <h3>Scoot S-Pro</h3>
                    <p>125cc | Automatic | Eco Mode</p>
                    <p class="price">$1,200</p>
                    <button class="btn" onclick="loadVehicleDetail('Scoot S-Pro', 'SCOOT-125', 1200, 'Scooter')">View Details</button>
                </div>
            </div>

            <div id="compare-section">
                <h3>Vehicle Comparison</h3>
                <table>
                    <tr>
                        <th>Feature</th>
                        <th>Thunder X1</th>
                        <th>Scoot S-Pro</th>
                    </tr>
                    <tr>
                        <td>Engine</td>
                        <td>500cc Twin</td>
                        <td>125cc Single</td>
                    </tr>
                    <tr>
                        <td>Transmission</td>
                        <td>6-Speed Manual</td>
                        <td>CVT Automatic</td>
                    </tr>
                    <tr>
                        <td>Price</td>
                        <td>$2,500</td>
                        <td>$1,200</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="leadModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">Book Test Drive</h3>
            <form id="leadForm" onsubmit="handleFormSubmit(event)">
                <input type="text" id="name" placeholder="Full Name" required>
                <input type="email" id="email" placeholder="Email Address" required>
                <input type="tel" id="phone" placeholder="Phone Number" required>
                <select id="modelSelect">
                    <option value="Thunder X1">Thunder X1</option>
                    <option value="Scoot S-Pro">Scoot S-Pro</option>
                </select>
                
                <div id="otp-section">
                    <label style="font-size: 0.9em; color: #555;">Verification Code Sent!</label>
                    <input type="text" id="otpInput" placeholder="Enter OTP (Use 1234)">
                </div>

                <button type="submit" id="submitBtn" class="btn" style="width: 100%;">Send Verification Code</button>
            </form>
        </div>
    </div>

    <script>
        // --- 1. Navigation & Features ---
        
        function showHome() {
            document.getElementById('home-view').style.display = 'block';
            window.scrollTo(0, 0);
        }

        function toggleCompare() {
            var section = document.getElementById('compare-section');
            if (section.style.display === 'none' || section.style.display === '') {
                section.style.display = 'block';
                // Track Comparison View
                window.dataLayer.push({
                    'event': 'compare_view',
                    'compare_items': ['Thunder X1', 'Scoot S-Pro']
                });
                alert("Comparison Mode Activated! Scroll down to see table.");
            } else {
                section.style.display = 'none';
            }
        }

        function loadVehicleDetail(name, id, price, category) {
            // Track View Item
            window.dataLayer.push({
                'event': 'view_item',
                'ecommerce': {
                    'currency': 'USD',
                    'value': price,
                    'items': [{
                        'item_id': id,
                        'item_name': name,
                        'item_category': category,
                        'price': price
                    }]
                }
            });
            alert("Navigating to details for: " + name + "\n(Check GTM/Console for 'view_item' event)");
        }

        // --- 2. Lead Form & OTP Logic ---

        let otpStep = 1; // 1 = Send OTP, 2 = Verify OTP

        function openModal() {
            document.getElementById('leadModal').style.display = 'flex';
            // Reset Form State
            otpStep = 1;
            document.getElementById('otp-section').style.display = 'none';
            document.getElementById('submitBtn').innerText = "Send Verification Code";
            document.getElementById('otpInput').required = false;
            
            // Track Form Start
            window.dataLayer.push({ 'event': 'form_start' });
        }

        function closeModal() {
            document.getElementById('leadModal').style.display = 'none';
        }

        function handleFormSubmit(e) {
            e.preventDefault();

            // Step 1: User requests OTP
            if (otpStep === 1) {
                // Simulate sending SMS
                otpStep = 2;
                document.getElementById('otp-section').style.display = 'block';
                document.getElementById('submitBtn').innerText = "Verify & Book Test Drive";
                document.getElementById('otpInput').required = true;
                
                alert("OTP Sent to " + document.getElementById('phone').value + ". (Use code 1234)");
                
                // Track OTP Sent
                window.dataLayer.push({
                    'event': 'otp_sent',
                    'phone_number': '***' // Don't send PII
                });

            // Step 2: User enters OTP
            } else {
                var enteredOTP = document.getElementById('otpInput').value;
                if (enteredOTP === '1234') {
                    // Success!
                    
                    // Track OTP Success
                    window.dataLayer.push({ 'event': 'otp_verified' });
                    
                    // Track Lead
                    window.dataLayer.push({
                        'event': 'generate_lead',
                        'ecommerce': {
                            'currency': 'USD',
                            'value': 500
                        }
                    });
                    
                    alert("Success! Test Drive Booked. (Lead Event Fired)");
                    closeModal();
                } else {
                    alert("Invalid OTP! Please try again.");
                    // Track OTP Failure
                    window.dataLayer.push({ 'event': 'otp_failed' });
                }
            }
        }
    </script>
</body>
</html>
